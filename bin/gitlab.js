// Generated by CoffeeScript 1.7.1
var configFilePath, fs, gitlabDircPath, nconf, packageInfo, path, program, worker;

program = require("commander");

packageInfo = require("./../package.json");

fs = require("fs");

path = require("path");

nconf = require("nconf");

worker = require("./worker.js");

gitlabDircPath = path.join(process.env[(process.platform === "win32" ? "USERPROFILE" : "HOME")], ".gitlab");

if (!fs.existsSync(gitlabDircPath)) {
  fs.mkdirSync(gitlabDircPath);
}

configFilePath = path.join(gitlabDircPath, "config.json");

nconf.file({
  file: configFilePath
});

program.usage("[options]").version(packageInfo.version).option("-u, --url <url>", "Set url of gitlab", function(url) {
  nconf.set("url", url);
  nconf.save();
  return console.log("Save url");
}).option("-t, --token <token>", "Set token of gitlab", function(token) {
  nconf.set("token", token);
  nconf.save();
  return console.log("Save token");
}).option("-o, --option", "Log option", function() {
  console.log("url: ", nconf.get("url"));
  return console.log("token: ", nconf.get("token"));
}).option("--user", "Get current user", function() {
  return worker.users.current();
}).option("--users", "Get all user from gitlab", function() {
  return worker.users.all();
}).option("--users-current", "Get current user from gitlab", function() {
  return worker.users.current();
}).option("--users-show <userId>", "Get user by id from gitlab", function(userId) {
  return worker.users.show(userId);
}).option("--projects", "Get all project from gitlab", function() {
  return worker.projects.all();
}).option("--projects-show <projectId>", "Get project by id from gitlab", function(projectId) {
  return worker.projects.show(projectId);
});

program.parse(process.argv);

if (process.argv.length === 2) {
  program.help();
}
